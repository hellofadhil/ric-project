CREATE PROCEDURE SP_FormRicApprovals_Get
AS BEGIN
    SELECT * FROM FormRicApprovals WHERE IsDeleted=0
END
GO

CREATE PROCEDURE SP_FormRicApprovals_GetById
@Id UNIQUEIDENTIFIER
AS BEGIN
    SELECT * FROM FormRicApprovals WHERE Id=@Id AND IsDeleted=0
END
GO

CREATE PROCEDURE SP_FormRicApprovals_Create
@Id UNIQUEIDENTIFIER,
@IdFormRic UNIQUEIDENTIFIER,
@IdApprover UNIQUEIDENTIFIER,
@Role NVARCHAR(50),
@ApprovalStatus NVARCHAR(50)
AS BEGIN
    INSERT INTO FormRicApprovals(Id,IdFormRic,IdApprover,Role,ApprovalStatus,CreatedAt,IsDeleted)
    VALUES(@Id,@IdFormRic,@IdApprover,@Role,@ApprovalStatus,SYSDATETIMEOFFSET(),0)
END
GO

CREATE PROCEDURE SP_FormRicApprovals_Update
@Id UNIQUEIDENTIFIER,
@ApprovalStatus NVARCHAR(50)
AS BEGIN
    UPDATE FormRicApprovals SET
        ApprovalStatus=@ApprovalStatus,
        UpdatedAt=SYSDATETIMEOFFSET()
    WHERE Id=@Id
END
GO

CREATE PROCEDURE SP_FormRicApprovals_Delete
@Id UNIQUEIDENTIFIER
AS BEGIN
    UPDATE FormRicApprovals SET IsDeleted=1 WHERE Id=@Id
END
GO
